(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{59:function(e,t,a){e.exports=a(79)},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(57),r=a.n(c),i=a(3),o=a(40);const m={Transactions:{path:"/transactions"},Import:{path:"/transactions/import"},Portfolio:{path:"/portfolio"}};var u=()=>{const{pathname:e}=Object(i.n)();return l.a.createElement(l.a.Fragment,null,l.a.createElement("ul",{className:"nav nav-tabs"},Object.keys(m).map(t=>l.a.createElement("li",{className:"nav-item",type:"submit"},l.a.createElement(o.b,{className:"nav-link ".concat(e===m[t].path?"active":""),to:m[t].path},t)))),l.a.createElement(i.a,null))},s=a(86),d=a(85);var p=()=>{const[e,t]=Object(n.useState)({show:!1,data:{save:0,not_save:0}});return console.log(e),l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:"mb-3",onChange:e=>{e.preventDefault();const t=e.target.files[0];if(!t)return;const a={headers:{"Content-Type":"multipart/form-data"}},{name:n}=t;if(/xls(x)?$/.test(n)){const e=new FormData;e.append("file",e),s.a.post("https://d5dpil1j3vqslj3529om.apigw.yandexcloud.net/api/v1/transactions/import",t,a).then(e=>console.log(e))}}},l.a.createElement("label",{htmlFor:"formFile",className:"form-label"},"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0431\u0440\u043e\u043a\u0435\u0440\u0441\u043a\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u044b: \u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444, \u0412\u0422\u0411"),l.a.createElement("input",{className:"form-control",type:"file",id:"formFile"})),l.a.createElement(d.a,{show:e.show,onHide:()=>{t({...e,show:!1})}},l.a.createElement(d.a.Body,null,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439: ",e.data.save),l.a.createElement(d.a.Body,null,"\u041d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 (\u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435): ",e.data.not_save)))},y=a(11),v=a.n(y),E=a(88);var g=e=>{let{reqData:t,setReqData:a}=e;const{page:n,maxPage:c}=t,r=((e,t)=>{let a=null,n=null;t<=7?(a=1,n=t):e<=3?(a=1,n=7):e+3>=t?(a=t-6,n=t):(a=e-3,n=e+3);const l=Object(y.range)(a,n+1);return l[1]>2&&(l[1]=null),l[l.length-2]<t-1&&(l[l.length-2]=null),l[0]=1,l[l.length-1]=t,l})(n,c);return l.a.createElement(E.a,null,l.a.createElement(E.a.Prev,{onClick:()=>{n>1&&a({...t,page:n-1})}}),r.map(e=>null===e?l.a.createElement(E.a.Ellipsis,null):l.a.createElement(E.a.Item,{active:n===e||null,onClick:()=>(e=>a({...t,page:e}))(e)},e)),l.a.createElement(E.a.Next,{onClick:()=>{n!==c&&a({...t,page:n+1})}}))},h=a(83),b=a(84),D=a(58);var N=e=>{let{reqData:t,setReqData:a}=e;const{limit:n}=t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{className:"pagination",as:b.a,key:n,id:"button-customs",variant:"white",title:n},[10,25,50].map(e=>l.a.createElement(D.a.Item,{eventKey:e,onClick:()=>(e=>a({...t,limit:e}))(e),active:e===n},e))))};const w=e=>{const t=e.slice(0,4),a=e.slice(4,6),n=e.slice(6,8);return"".concat(n,".").concat(a,".").concat(t)};var f=e=>{const{data:t}=e,a=(t[0],["yield_last","yield_avg"]);t.forEach(e=>{a.forEach(t=>{e[t]&&(e[t]=(100*e[t]).toFixed(2))}),e.trade_date=w(e.trade_date)});const n={isin:"ISIN",trade_date:"Trade Date",count:"Quantity",price:"Price",summa:"Total amount"},l=Object.keys(n),c=t.map(e=>v.a.pick(e,l)).reduce((e,t)=>{const a={};return Object.keys(t).map(e=>{a[n[e]]=t[e]}),e.push(a),e},[]);return{...e,data:c}};const j=e=>{switch(e.toLowerCase()){case"quantity":case"price":case"total amount":return"rigthContent";default:return"leftContent"}},k=e=>{let{tags:t}=e;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"tags"},Object.keys(t).map(e=>l.a.createElement("div",{className:j(e),key:Object(y.uniqueId)()},e))))},C=e=>{let{body:t}=e;return l.a.createElement(l.a.Fragment,null,t.map(e=>l.a.createElement("div",{className:"body",key:Object(y.uniqueId)()},Object.entries(e).map(e=>{let[t,a]=e;return l.a.createElement("div",{className:j(t),key:Object(y.uniqueId)()},a)}))))};var A=()=>{const[e,t]=Object(n.useState)({page:1,limit:25});return Object(n.useEffect)(()=>{const{page:a,limit:n}=e,l="https://d5dpil1j3vqslj3529om.apigw.yandexcloud.net/api/v1/transactions?limit=".concat(n,"&page=").concat(a);(async()=>await s.a.get(l).then(e=>{let{data:a}=e;return!!a.data&&t(f(a))}))()},[e.page,e.limit]),l.a.createElement(l.a.Fragment,null,e.data&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"table"},l.a.createElement(k,{tags:e.data[0]}),l.a.createElement(C,{body:e.data})),l.a.createElement("div",{className:"pagination-limit"},0!==e.data.length&&l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(N,{reqData:e,setReqData:t})),l.a.createElement("th",null,l.a.createElement(g,{reqData:e,setReqData:t})))))||l.a.createElement("div",null,"Loaded"))},I=a(55),O=a.n(I),q=a(87);var F=class{constructor(e){this.informations={name:{correctName:"Name",width:120},priceAvg:{correctName:"Price Avg",width:90},priceDaily:{correctName:"Price ".concat(e),width:150},yieldAvg:{correctName:"Yield Avg",width:90},yieldDaily:{correctName:"Yield ".concat(e),width:150},couponPaymentFrequency:{correctName:"Coupons",width:90},type:{correctName:"Type",width:70},accruendCouponEod:{correctName:"NKD",width:150},count:{correctName:"Count",width:100},currentInverstment:{correctName:"CI",width:100},rating:{correctName:"Rating",width:50},ccy:{correctName:"Ccy",width:50},dateDaily:{correctName:"Daily Date",width:100},duration:{correctName:"Duration",width:100},isin:{correctName:"ISIN",width:150},maturityDate:{correctName:"Maturity Date",width:100},activeType:["name","priceAvg","priceDaily","yieldAvg","yieldDaily","couponPaymentFrequency","type","accruedCouponEod","count","currentInvestment"]}}addData(e){this.informations.data=e.reduce((e,t)=>{const{type:a}=t;return e[a].push(t),e.all.push(t),e},{all:[],bond:[],stock:[]}),this.principal=1e3}getData(e){return this.informations.data[e].map(e=>{const t=Object(y.pick)(e,this.informations.activeType);return t.accruedCouponEod=e.accruedCouponEod/100*this.principal*e.count||null,t.yieldDaily=100*t.yieldDaily||null,t.yieldAvg=100*t.yieldAvg||null,Object.keys(e).forEach(e=>{"number"===typeof t[e]&&(t[e]=t[e].toFixed(2).replace(".",","))}),t})}};const x=e=>"NaN"===e?null:e,P=(e,t)=>e.reduce((e,a)=>{if(a[t]){const n=new O.a(e.sum);e.sum=n.plus(Number(a[t].replace(",","."))).toString(),e.count+=1}return e},{sum:0,count:0}),T=e=>{let{sum:t,count:a}=e;return new O.a(t).div(a).toFixed(2)},S=["accruedCouponEod","yieldAvg","yieldDaily","currentInvestment"],R={accruedCouponEod:150,ccy:50,count:100,couponPaymentFrequency:90,dateDaily:100,duration:100,isin:150,maturityDate:100,name:120,priceAvg:90,priceDaily:150,rating:50,type:70,yieldAvg:90,yieldDaily:150,currentInvestment:100},_=e=>{const t={accruedCouponEod:P(e,"accruedCouponEod").sum,yieldAvg:T(P(e,"yieldAvg")),yieldDaily:T(P(e,"yieldDaily")),currentInvestment:P(e,"currentInvestment").sum};return Object.keys(e[0]).map(e=>S.includes(e)?{value:x(t[e]),styleWidth:R[e]}:{value:null,styleWidth:R[e]})},K=e=>{let{activeType:t,setActiveType:a}=e;return l.a.createElement(q.a,{variant:"underline",defaultActiveKey:t},["Bond","Stock","All"].map(e=>l.a.createElement(q.a.Item,null,l.a.createElement(q.a.Link,{eventKey:e,onClick:()=>a(e)},e))))},L=e=>{let{info:t,length:a}=e;return l.a.createElement("div",{className:"portfolio-tags-info",style:{width:a+"px"}},t.map(e=>{let{value:t,styleWidth:a}=e;return l.a.createElement("div",{key:Object(y.uniqueId)(),style:{width:a+"px",textAlign:"right"}},t)}))},B=e=>{let{tags:t,length:a}=e;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"portfolio-tags",style:{width:a+"px"}},t.map(e=>{let{oldName:t,newName:a}=e;return l.a.createElement("div",{key:Object(y.uniqueId)(),style:{width:R[t]+"px"}},a)})))},Y=e=>{let{body:t,length:a}=e;return l.a.createElement(l.a.Fragment,null,t.map(e=>l.a.createElement("div",{className:"portfolio-body",key:Object(y.uniqueId)(),style:{width:a+"px"}},Object.entries(e).map(e=>{let[t,a]=e;return l.a.createElement("div",{key:Object(y.uniqueId)(),style:{width:R[t]+"px",textAlign:new RegExp(/\d,\d/).test(a)?"right":null}},a)}))))},W=(e,t)=>e.map(e=>{const a=Object(y.pick)(e,t);return a.accruedCouponEod=e.accruedCouponEod/100*1e3*e.count||null,a.yieldDaily=100*a.yieldDaily||null,a.yieldAvg=100*a.yieldAvg||null,Object.keys(e).forEach(e=>{"number"===typeof a[e]&&(a[e]=a[e].toFixed(2).replace(".",","))}),a}),J=(e,t)=>e.reduce((e,a)=>e=[...e,{oldName:a,newName:t[a]}],[]);var M=()=>{const[e,t]=Object(n.useState)({dateDaily:"-"}),[a,c]=Object(n.useState)(["name","priceAvg","priceDaily","yieldAvg","yieldDaily","couponPaymentFrequency","type","accruedCouponEod","count","currentInvestment"]),[r,i]=Object(n.useState)("All"),o=new F("-"),m={name:"Name",priceAvg:"Price Avg",priceDaily:"Price ".concat(e.dateDaily),yieldAvg:"Yield Avg",yieldDaily:"Yield ".concat(e.dateDaily),couponPaymentFrequency:"Coupons",type:"Type",accruedCouponEod:"NKD",count:"Count",currentInvestment:"CI",rating:"Rating",ccy:"Ccy",dateDaily:"Daily Date",duration:"Duration",isin:"ISIN",maturityDate:"Maturity Date"};Object(n.useEffect)(()=>{s.a.get("https://d5dpil1j3vqslj3529om.apigw.yandexcloud.net/api/v1/portfolio").then(n=>{let{data:l}=n;o.addData(l),t({...e,data:{all:W(l,a),bond:W(l.filter(e=>{let{type:t}=e;return"bond"===t}),a),stock:W(l.filter(e=>{let{type:t}=e;return"stock"===t}),a)},dateDaily:w(l[0].dateDaily)}),console.log(o.getData("bond"))})},[]);const u=e.data&&Object.keys(e.data.all[0]).reduce((e,t)=>e+R[t]+20,0);return l.a.createElement(l.a.Fragment,null,!!e.data&&l.a.createElement(l.a.Fragment,null,l.a.createElement(K,{activeType:r,setActiveType:i}),l.a.createElement("div",{className:"table"},l.a.createElement(B,{tags:J(a,m),length:u}),l.a.createElement(L,{info:_(e.data[r.toLowerCase()]),length:u}),l.a.createElement("div",{className:"table-body"},l.a.createElement(Y,{body:e.data[r.toLowerCase()],length:u})))))};var H=()=>l.a.createElement(o.a,null,l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/",element:l.a.createElement(u,null)},l.a.createElement(i.b,{path:"transactions",element:l.a.createElement(A,null)}),l.a.createElement(i.b,{path:"transactions/import",element:l.a.createElement(p,null)}),l.a.createElement(i.b,{path:"*",element:l.a.createElement(M,null)}))));a(77),a(78);r.a.createRoot(document.getElementById("root")).render(l.a.createElement(H,null))}},[[59,1,2]]]);
//# sourceMappingURL=main.63ae28ac.chunk.js.map